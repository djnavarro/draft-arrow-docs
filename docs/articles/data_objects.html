<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn about Scalar, Array, Table, and Dataset objects in `arrow`  (among others), how they relate to each other, as well as their  relationships to familiar R objects like data frames and vectors 
">
<title>Data objects • Arrow R Package</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Data objects">
<meta property="og:description" content="Learn about Scalar, Array, Table, and Dataset objects in `arrow`  (among others), how they relate to each other, as well as their  relationships to familiar R objects like data frames and vectors 
">
<meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png">
<meta property="og:image:alt" content="Apache Arrow logo, displaying the triple chevron image adjacent to the text">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@apachearrow">
<meta name="twitter:site" content="@apachearrow">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '20']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script><!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-black"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Arrow R Package</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">10.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/arrow.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Using the package</h6>
    <a class="dropdown-item" href="../articles/read_write.html">Reading and writing data files</a>
    <a class="dropdown-item" href="../articles/data_wrangling.html">Data analysis with dplyr syntax</a>
    <a class="dropdown-item" href="../articles/dataset.html">Working with multi-file data sets</a>
    <a class="dropdown-item" href="../articles/python.html">Integrating Arrow, Python, and R</a>
    <a class="dropdown-item" href="../articles/fs.html">Using cloud storage (S3, GCS)</a>
    <a class="dropdown-item" href="../articles/flight.html">Connecting to a Flight server</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Arrow concepts</h6>
    <a class="dropdown-item" href="../articles/data_objects.html">Data objects</a>
    <a class="dropdown-item" href="../articles/data_types.html">Data types</a>
    <a class="dropdown-item" href="../articles/metadata.html">Metadata</a>
    <a class="dropdown-item" href="../articles/package_conventions.html">Package conventions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Installation</h6>
    <a class="dropdown-item" href="../articles/install.html">Installing on Linux</a>
    <a class="dropdown-item" href="../articles/install_nightly.html">Installing development versions</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Data objects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/apache/arrow/blob/master/r/vignettes/data_objects.Rmd" class="external-link"><code>vignettes/data_objects.Rmd</code></a></small>
      <div class="d-none name"><code>data_objects.Rmd</code></div>
    </div>

    
    
<p>This article describes the various data object types supplied by
<code>arrow</code>, and documents how these objects are structured.</p>
<p>The <code>arrow</code> package supplies several object classes that
are used to represent data. <code>RecordBatch</code>,
<code>Table</code>, and <code>Dataset</code> objects are two-dimensional
rectangular data structures used to store tabular data. For columnar,
one-dimensional data, the <code>Array</code> and
<code>ChunkedArray</code> classes are provided. Finally,
<code>Scalar</code> objects represent individual values. The table below
summarizes these objects and shows how you can create new instances
using the <a href="https://r6.r-lib.org/" class="external-link"><code>R6</code></a> class
object, as well as convenience functions that provide the same
functionality in a more traditional R-like fashion:</p>
<table class="table">
<colgroup>
<col width="2%">
<col width="12%">
<col width="42%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>Dim</th>
<th>Class</th>
<th>How to create an instance</th>
<th>Convenience function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td><code>Scalar</code></td>
<td><code>Scalar$create(value, type)</code></td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td><code>Array</code></td>
<td><code>Array$create(vector, type)</code></td>
<td></td>
</tr>
<tr class="odd">
<td>1</td>
<td><code>ChunkedArray</code></td>
<td><code>ChunkedArray$create(..., type)</code></td>
<td><code>chunked_array(..., type)</code></td>
</tr>
<tr class="even">
<td>2</td>
<td><code>RecordBatch</code></td>
<td><code>RecordBatch$create(...)</code></td>
<td><code>record_batch(...)</code></td>
</tr>
<tr class="odd">
<td>2</td>
<td><code>Table</code></td>
<td><code>Table$create(...)</code></td>
<td><code>arrow_table(...)</code></td>
</tr>
<tr class="even">
<td>2</td>
<td><code>Dataset</code></td>
<td><code>Dataset$create(sources, schema)</code></td>
<td><code>open_dataset(sources, schema)</code></td>
</tr>
</tbody>
</table>
<p>Later in the article we’ll look at each of these in more detail.</p>
<p>For now we note that each of these object classes corresponds to a
class of the same name in the underlying Arrow C++ library. It is also
worth mentioning that the <code>arrow</code> package also defines
classes that do not exist in the C++ library including:</p>
<ul>
<li>
<code>ArrowDatum</code>: inherited by <code>Scalar</code>,
<code>Array</code>, and <code>ChunkedArray</code>
</li>
<li>
<code>ArrowTabular</code>: inherited by <code>RecordBatch</code> and
<code>Table</code>
</li>
<li>
<code>ArrowObject</code>: inherited by all Arrow objects</li>
</ul>
<p>In addition to these data objects, <code>arrow</code> defines the
following classes for representing metadata:</p>
<ul>
<li>A <code>Schema</code> is a list of <code>Field</code> objects used
to describe the structure of a tabular data object; where</li>
<li>A <code>Field</code> specifies a character string name and a
<code>DataType</code>; and</li>
<li>A <code>DataType</code> is an attribute controlling how values are
represented</li>
</ul>
<p>To learn more about the metadata classes, see the <a href="./metadata.html">metadata article</a>.</p>
<div class="section level2">
<h2 id="scalars">Scalars<a class="anchor" aria-label="anchor" href="#scalars"></a>
</h2>
<p>A Scalar object is simply a single value that can be of any type. It
might be an integer, a string, a timestamp, or any of the different
<code>DataType</code> objects that Arrow supports. Most users of the
<code>arrow</code> R package are unlikely to create Scalars directly,
but should there be a need you can do this by calling the
<code>Scalar$create()</code> method:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Scalar</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"hello"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Scalar</span>
<span class="co">## hello</span></code></pre>
</div>
<div class="section level2">
<h2 id="arrays">Arrays<a class="anchor" aria-label="anchor" href="#arrays"></a>
</h2>
<p>Array objects are ordered sets of Scalar values. As with Scalars most
users will not need to create Arrays directly, but if the need arises
there is an <code>Array$create()</code> method that allows you to create
new Arrays:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">integer_array</span> <span class="op">&lt;-</span> <span class="va">Array</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="cn">NA</span>, <span class="fl">2L</span>, <span class="fl">4L</span>, <span class="fl">8L</span><span class="op">)</span><span class="op">)</span>
<span class="va">integer_array</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;int32&gt;</span>
<span class="co">## [</span>
<span class="co">##   1,</span>
<span class="co">##   null,</span>
<span class="co">##   2,</span>
<span class="co">##   4,</span>
<span class="co">##   8</span>
<span class="co">## ]</span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">string_array</span> <span class="op">&lt;-</span> <span class="va">Array</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="st">"amazing"</span>, <span class="st">"and"</span>, <span class="st">"cruel"</span>, <span class="st">"world"</span><span class="op">)</span><span class="op">)</span>
<span class="va">string_array</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   "hello",</span>
<span class="co">##   "amazing",</span>
<span class="co">##   "and",</span>
<span class="co">##   "cruel",</span>
<span class="co">##   "world"</span>
<span class="co">## ]</span></code></pre>
<p>An Array can be subset using square brackets as shown below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">string_array</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   "cruel",</span>
<span class="co">##   "world"</span>
<span class="co">## ]</span></code></pre>
<p>Arrays are immutable objects: once an Array has been created it
cannot be modified or extended.</p>
</div>
<div class="section level2">
<h2 id="chunked-arrays">Chunked Arrays<a class="anchor" aria-label="anchor" href="#chunked-arrays"></a>
</h2>
<p>In practice, most users of the <code>arrow</code> R package are
likely to use Chunked Arrays rather than simple Arrays. Under the hood,
a Chunked Array is a collection of one or more Arrays that can be
indexed <em>as if</em> they were a single Array. The reasons that Arrow
provides this functionality are described in the <a href="./developers/data_object_layout.html">data object layout
article</a> but for the present purposes it is sufficient to notice that
Chunked Arrays behave like Arrays in regular data analysis.</p>
<p>To illustrate, let’s use the <code><a href="../reference/ChunkedArray.html">chunked_array()</a></code>
function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chunked_string_array</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ChunkedArray.html">chunked_array</a></span><span class="op">(</span>
  <span class="va">string_array</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I"</span>, <span class="st">"love"</span>, <span class="st">"you"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The <code><a href="../reference/ChunkedArray.html">chunked_array()</a></code> function is just a wrapper around
the functionality that <code>ChunkedArray$create()</code> provides.
Let’s print the object:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chunked_string_array</span></code></pre></div>
<pre><code><span class="co">## ChunkedArray</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   [</span>
<span class="co">##     "hello",</span>
<span class="co">##     "amazing",</span>
<span class="co">##     "and",</span>
<span class="co">##     "cruel",</span>
<span class="co">##     "world"</span>
<span class="co">##   ],</span>
<span class="co">##   [</span>
<span class="co">##     "I",</span>
<span class="co">##     "love",</span>
<span class="co">##     "you"</span>
<span class="co">##   ]</span>
<span class="co">## ]</span></code></pre>
<p>The double bracketing in this output is intended to highlight the
fact that Chunked Arrays are wrappers around one or more Arrays.
However, although comprised of multiple distinct Arrays, a Chunked Array
can be indexed as if they were laid end-to-end in a single “vector-like”
object. This is illustrated below:</p>
<p><img src="array_indexing.png" width="100%"></p>
<p>We can use <code>chunked_string_array</code> to illustrate this:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chunked_string_array</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></code></pre></div>
<pre><code><span class="co">## ChunkedArray</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   [</span>
<span class="co">##     "cruel",</span>
<span class="co">##     "world"</span>
<span class="co">##   ],</span>
<span class="co">##   [</span>
<span class="co">##     "I",</span>
<span class="co">##     "love"</span>
<span class="co">##   ]</span>
<span class="co">## ]</span></code></pre>
<p>An important thing to note is that “chunking” is not semantically
meaningful. It is an implementation detail only: users should never
treat the chunk as a meaningful unit. Writing the data to disk, for
example, often results in the data being organized into different
chunks. Similarly, two Chunked Arrays that contain the same values
assigned to different chunks are deemed equivalent. To illustrate this
we can create a Chunked Array that contains the same four same four
values as <code>chunked_string_array[4:7]</code>, but organized into one
chunk rather than split into two:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cruel_world</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ChunkedArray.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cruel"</span>, <span class="st">"world"</span>, <span class="st">"I"</span>, <span class="st">"love"</span><span class="op">)</span><span class="op">)</span>
<span class="va">cruel_world</span></code></pre></div>
<pre><code><span class="co">## ChunkedArray</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   [</span>
<span class="co">##     "cruel",</span>
<span class="co">##     "world",</span>
<span class="co">##     "I",</span>
<span class="co">##     "love"</span>
<span class="co">##   ]</span>
<span class="co">## ]</span></code></pre>
<p>Testing for equality using <code>==</code> produces an element-wise
comparison, and the result is a new Chunked Array of four (boolean type)
<code>true</code> values:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cruel_world</span> <span class="op">==</span> <span class="va">chunked_string_array</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></code></pre></div>
<pre><code><span class="co">## ChunkedArray</span>
<span class="co">## &lt;bool&gt;</span>
<span class="co">## [</span>
<span class="co">##   [</span>
<span class="co">##     true,</span>
<span class="co">##     true,</span>
<span class="co">##     true,</span>
<span class="co">##     true</span>
<span class="co">##   ]</span>
<span class="co">## ]</span></code></pre>
<p>In short, the intention is that users interact with Chunked Arrays as
if they are ordinary one-dimensional data structures without ever having
to think much about the underlying chunking arrangement.</p>
<p>Chunked Arrays are mutable, in a specific sense: Arrays can be added
and removed from a Chunked Array.</p>
</div>
<div class="section level2">
<h2 id="record-batches">Record Batches<a class="anchor" aria-label="anchor" href="#record-batches"></a>
</h2>
<p>A Record Batch is tabular data structure comprised of named Arrays.
Record Batches are a fundamental unit for data interchange in Arrow, but
are not typically used for data analysis. Tables and Datasets are
usually more convenient in analytic contexts.</p>
<p>These Arrays can be of different types but must all be the same
length. Each Array is referred to as one of the “fields” or “columns” of
the Record Batch. You can create a Record Batch using the
<code><a href="../reference/RecordBatch.html">record_batch()</a></code> function or by using the
<code>RecordBatch$create()</code> method. These functions are flexible
and can accept inputs in several formats: you can pass a data frame, one
or more named vectors, an input stream, or even a raw vector containing
appropriate binary data. For example:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RecordBatch.html">record_batch</a></span><span class="op">(</span>
  strs <span class="op">=</span> <span class="va">string_array</span>, 
  ints <span class="op">=</span> <span class="va">integer_array</span>,
  dbls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">3.2</span>, <span class="fl">0.2</span>, <span class="cn">NA</span>, <span class="fl">11</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">rb</span></code></pre></div>
<pre><code><span class="co">## RecordBatch</span>
<span class="co">## 5 rows x 3 columns</span>
<span class="co">## $strs &lt;string&gt;</span>
<span class="co">## $ints &lt;int32&gt;</span>
<span class="co">## $dbls &lt;double&gt;</span></code></pre>
<p>This is a Record Batch containing 5 rows and 3 columns, and its
conceptual structure is shown below:</p>
<p><img src="record_batch.png" width="100%"></p>
<p>The <code>arrow</code> package supplies a <code>$</code> method for
Record Batch objects, used to extract a single column by name:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rb</span><span class="op">$</span><span class="va">strs</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   "hello",</span>
<span class="co">##   "amazing",</span>
<span class="co">##   "and",</span>
<span class="co">##   "cruel",</span>
<span class="co">##   "world"</span>
<span class="co">## ]</span></code></pre>
<p>You can use double brackets <code>[[</code> to refer to columns by
position. The <code>rb$ints</code> array is the second column in our
Record Batch so we can extract it with this:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rb</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;int32&gt;</span>
<span class="co">## [</span>
<span class="co">##   1,</span>
<span class="co">##   null,</span>
<span class="co">##   2,</span>
<span class="co">##   4,</span>
<span class="co">##   8</span>
<span class="co">## ]</span></code></pre>
<p>There is also <code>[</code> method that allows you to extract
subsets of a record batch in the same way you would for a data frame.
The command <code>rb[1:3, 1:2]</code> extracts the first three rows and
the first two columns:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rb</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code><span class="co">## RecordBatch</span>
<span class="co">## 3 rows x 2 columns</span>
<span class="co">## $strs &lt;string&gt;</span>
<span class="co">## $ints &lt;int32&gt;</span></code></pre>
<p>Record Batches cannot be concatenated: because they are comprised of
Arrays, and Arrays are immutable objects, new rows cannot be added to
Record Batch once created.</p>
</div>
<div class="section level2">
<h2 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h2>
<p>A Table is comprised of named Chunked Arrays, in the same way that a
Record Batch is comprised of named Arrays. You can subset Tables with
<code>$</code>, <code>[[</code>, and <code>[</code> the same way you can
for Record Batches. Unlike Record Batches, Tables can be concatenated
(because they are comprised of Chunked Arrays). Suppose a second Record
Batch arrives:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_rb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RecordBatch.html">record_batch</a></span><span class="op">(</span>
  strs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I"</span>, <span class="st">"love"</span>, <span class="st">"you"</span><span class="op">)</span>, 
  ints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5L</span>, <span class="fl">0L</span>, <span class="fl">0L</span><span class="op">)</span>,
  dbls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7.1</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="fl">2</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>It is not possible to create a Record Batch that appends the data
from <code>new_rb</code> to the data in <code>rb</code>, not without
creating entirely new objects in memory. With Tables, however, we
can:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Table.html">arrow_table</a></span><span class="op">(</span><span class="va">rb</span><span class="op">)</span>
<span class="va">new_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Table.html">arrow_table</a></span><span class="op">(</span><span class="va">new_rb</span><span class="op">)</span></code></pre></div>
<p>We now have the two fragments of the data set represented as Tables.
The difference between the Table and the Record Batch is that the
columns are all represented as Chunked Arrays. Each Array from the
original Record Batch is one chunk in the corresponding Chunked Array in
the Table:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rb</span><span class="op">$</span><span class="va">strs</span></code></pre></div>
<pre><code><span class="co">## Array</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   "hello",</span>
<span class="co">##   "amazing",</span>
<span class="co">##   "and",</span>
<span class="co">##   "cruel",</span>
<span class="co">##   "world"</span>
<span class="co">## ]</span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">strs</span></code></pre></div>
<pre><code><span class="co">## ChunkedArray</span>
<span class="co">## &lt;string&gt;</span>
<span class="co">## [</span>
<span class="co">##   [</span>
<span class="co">##     "hello",</span>
<span class="co">##     "amazing",</span>
<span class="co">##     "and",</span>
<span class="co">##     "cruel",</span>
<span class="co">##     "world"</span>
<span class="co">##   ]</span>
<span class="co">## ]</span></code></pre>
<p>It’s the same underlying data – and indeed the same immutable Array
is referenced by both – just enclosed by a new, flexible Chunked Array
wrapper. However, it is this wrapper that allows us to concatenate
Tables:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/concat_tables.html">concat_tables</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">new_df</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Table</span>
<span class="co">## 8 rows x 3 columns</span>
<span class="co">## $strs &lt;string&gt;</span>
<span class="co">## $ints &lt;int32&gt;</span>
<span class="co">## $dbls &lt;double&gt;</span></code></pre>
<p>The resulting object is shown schematically below:</p>
<p><img src="table.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li>To learn more about the internal structure of Arrays, see the
article on <a href="./developers/data_object_layout.html">data object
layout</a>.</li>
<li>To learn more about the different data types that can be represented
in Arrow, see the article on <a href="./data_types.html">data
types</a>.</li>
<li>To learn more about how Arrow objects are implemented, see the <a href="https://arrow.apache.org/docs/format/Columnar.html" class="external-link">Arrow
specification</a> page.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Neal Richardson, Ian Cook, Nic Crane, Dewey Dunnington, Romain François, Jonathan Keane, Dragoș Moldovan-Grünfeld, Jeroen Ooms, Apache Arrow.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
